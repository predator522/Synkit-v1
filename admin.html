<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Synkit Admin Panel</title>
<style>
    body { font-family: 'Roboto', sans-serif; background:#000; color:#fff; margin:0; padding:0; min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; }
    header { width:100%; padding:20px; background:rgba(0,0,0,0.9); text-align:center; font-size:32px; font-weight:700; color:#00FFFF; text-shadow:0 0 15px #00FFFF,0 0 25px #008080; }
    .container { max-width:700px; width:90%; background:rgba(255,255,255,0.1); padding:20px; border-radius:10px; box-shadow:0 0 20px rgba(0,255,255,0.5); margin:20px 0; }
    input, button, select, textarea { width:100%; padding:10px; margin:8px 0; border-radius:5px; border:none; box-sizing:border-box; font-size:16px; }
    input, select, textarea { border:2px solid #00FFFF; background:#111; color:#fff; }
    input:focus, select:focus, textarea:focus { outline:none; border-color:#008080; box-shadow:0 0 8px #008080; }
    button { background:linear-gradient(45deg,#00FFFF,#008080); color:#fff; cursor:pointer; font-weight:500; transition:transform 0.2s,box-shadow 0.2s; }
    button:hover { transform:scale(1.05); box-shadow:0 0 12px #00FFFF; }
    .tool-item { background:rgba(0,0,0,0.7); padding:15px; margin:10px 0; border-radius:8px; display:flex; justify-content:space-between; align-items:center; }
    .tool-actions button { margin-left:10px; padding:6px 10px; font-size:14px; }
    #modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; color:#fff; padding:20px; box-sizing:border-box; }
    #modalContent { background:#111; padding:20px; border-radius:10px; max-width:600px; max-height:80vh; overflow-y:auto; }
    footer { width:100%; padding:20px; background:rgba(0,0,0,0.9); text-align:center; font-size:14px; color:#808080; border-top:1px solid #00FFFF; }
</style>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
<header>Synkit Admin Panel</header>

<div id="loading">‚è≥ Loading...</div>

<div id="loginBox" class="container" style="display:none;">
    <h2>üîë Enter Master Key</h2>
    <input type="password" id="adminPass" placeholder="Enter master key...">
    <button onclick="checkAdmin()">Unlock Admin</button>
</div>

<div id="adminContent" class="container" style="display:none;">
    <h2>‚úÖ Welcome, Admin</h2>
    <button onclick="logout()">Logout</button>
    <button onclick="resetOnboarding()">Reset Onboarding</button>

    <h3>Manage Categories</h3>
    <input type="text" id="newCategory" placeholder="New category name">
    <button onclick="addCategory()">Add Category</button>

    <h3>Add New Tool</h3>
    <select id="categorySelect"></select>
    <input type="text" id="toolName" placeholder="Tool/Lesson name">
    <input type="text" id="toolLink" placeholder="Optional link (http:// or https://)">
    <textarea id="toolContent" placeholder="Optional lesson/steps"></textarea>
    <button onclick="addTool()">Add Tool</button>

    <h3>Manage Tools</h3>
    <div id="toolsList"></div>
</div>

<div id="modal" onclick="closeModal()">
    <div id="modalContent"></div>
</div>

<footer>
    <p>Developed by Dev FÃ∏AÃ∏CÃ∏ ShŒîdow | All rights reserved 2025</p>
</footer>

          <script>    
const BIN_ID = "68d3ae8ed0ea881f4088e97d";      
const API_KEY = "$2a$10$WU9EPi5LbC9ImvrT7UMbUe/5OEEKQc.AobH.V7aAyzLmSvaMnJ0NO";     
const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;    
let binData = null;    
let isLoading = true;    
    
async function loadData() {    
    document.getElementById("loading").style.display="flex";    
    try {    
        let res = await fetch(BIN_URL,{headers:{"X-Master-Key":API_KEY}});    
        if(!res.ok) throw new Error(`HTTP error! Status: ${res.status}`);    
        let data = await res.json();    
        binData = data.record;     
        isLoading=false;    
        document.getElementById("loading").style.display="none";    
        document.getElementById("loginBox").style.display="block";    
    } catch(e) {    
        console.error("Load failed",e);    
        alert("‚ùå Failed to load data. Refresh page.");    
    }    
}    
    
function checkAdmin(){    
    if(isLoading){ alert("‚è≥ Loading data..."); return; }    
    let input = document.getElementById("adminPass").value.trim();    
    if(input===binData.keys.admin){    
        document.getElementById("loginBox").style.display="none";    
        document.getElementById("adminContent").style.display="block";    
        renderCategoryOptions();    
        renderTools();    
    } else { alert("‚ùå Invalid master key!"); }    
}    
    
function logout(){    
    document.getElementById("adminContent").style.display="none";    
    document.getElementById("loginBox").style.display="block";    
    document.getElementById("adminPass").value="";    
}    
    
function resetOnboarding(){    
    localStorage.removeItem("onboardingDone");    
    alert("‚úÖ Onboarding reset. Users will see join flow again.");    
}    
    
function renderCategoryOptions(){    
    let select = document.getElementById("categorySelect");    
    select.innerHTML="";    
    binData.categories.forEach(cat=>{    
        let option=document.createElement("option");    
        option.value=cat.name;    
        option.textContent=cat.name;    
        select.appendChild(option);    
    });    
}    
    
async function addCategory(){    
    let name=document.getElementById("newCategory").value.trim();    
    if(!name) return alert("Enter category name");    
    if(binData.categories.some(c=>c.name===name)) return alert("Category exists");    
    binData.categories.push({name:name,tools:[]});    
    await saveData("‚úÖ Category added!");    
    document.getElementById("newCategory").value="";    
    renderCategoryOptions();    
    renderTools();    
}    
    
async function addTool(){    
    let catName=document.getElementById("categorySelect").value;    
    let name=document.getElementById("toolName").value.trim();    
    let link=document.getElementById("toolLink").value.trim();    
    let content=document.getElementById("toolContent").value.trim();    
    if(!name) return alert("Enter tool name");    
    if(!link && !content) return alert("Enter link or content");    
    let category=binData.categories.find(c=>c.name===catName);    
    if(category.tools.some(t=>t.name===name)) return alert("Tool exists in this category");    
    category.tools.push({name:name,link:link,content:content});    
    await saveData("‚úÖ Tool added!");    
    document.getElementById("toolName").value="";    
    document.getElementById("toolLink").value="";    
    document.getElementById("toolContent").value="";    
    renderTools();    
}    
    
function renderTools(){    
    let container=document.getElementById("toolsList");    
    container.innerHTML="";    
    binData.categories.forEach(cat=>{    
        let catHeader=document.createElement("h4");    
        catHeader.textContent=cat.name;    
        container.appendChild(catHeader);    
    
        cat.tools.forEach((t,i)=>{    
            let div=document.createElement("div");    
            div.className="tool-item";    
    
            let name=document.createElement("span");    
            name.textContent=t.name;    
    
            let actions=document.createElement("div");    
            actions.className="tool-actions";    
    
            let openBtn=document.createElement("button");    
            openBtn.textContent="Open";    
            openBtn.onclick=()=>{    
                if(t.link) window.open(t.link,"_blank");    
                else if(t.content) showContent(t.content);    
                else alert("‚ö†Ô∏è No content");    
            };    
    
            let editBtn=document.createElement("button");    
            editBtn.textContent="‚úèÔ∏è Edit";    
            editBtn.onclick=()=>editTool(cat.name,i);    
    
            let delBtn=document.createElement("button");    
            delBtn.textContent="üóë Delete";    
            delBtn.onclick=()=>deleteTool(cat.name,i);    
    
            actions.appendChild(openBtn);    
            actions.appendChild(editBtn);    
            actions.appendChild(delBtn);    
    
            div.appendChild(name);    
            div.appendChild(actions);    
            container.appendChild(div);    
        });    
    });    
}    
    
function showContent(content){    
    document.getElementById("modalContent").textContent=content;    
    document.getElementById("modal").style.display="flex";    
}    
    
function closeModal(){    
    document.getElementById("modal").style.display="none";    
}    
    
async function editTool(catName,index){    
    let category=binData.categories.find(c=>c.name===catName);    
    let tool=category.tools[index];    
    let newName=prompt("Enter new name:",tool.name);    
    let newLink=prompt("Enter new link:",tool.link);    
    let newContent=prompt("Enter new content:",tool.content);    
    if(!newName) return;    
    tool.name=newName;    
    tool.link=newLink||"";    
    tool.content=newContent||"";    
    await saveData("‚úÖ Tool updated!");    
    renderTools();    
}    
    
async function deleteTool(catName,index){    
    if(!confirm("Are you sure?")) return;    
    let category=binData.categories.find(c=>c.name===catName);    
    category.tools.splice(index,1);    
    await saveData("‚úÖ Tool deleted!");    
    renderTools();    
}    
    
async function saveData(msg){    
    try{    
        await fetch(BIN_URL,{    
            method:"PUT",    
            headers:{    
                "Content-Type":"application/json",    
                "X-Master-Key":API_KEY    
            },    
            body:JSON.stringify(binData)    
        });    
        alert(msg);    
    }catch(e){    
        alert("‚ùå Update failed: "+e.message);    
    }    
}    
    
loadData();    
 </script>
</body>
</html>
